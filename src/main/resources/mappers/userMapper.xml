<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="main.java.com.kokihoon.mapper.userMapper">
  
  
  <insert id="register">
    insert into tbl_user (
        userId,
        userPw,
        userName,
        userEmail
    ) values (
        #{userId},
        #{userPw},
        #{userName},
        #{userEmail}
    )
  </insert>
  
  <update id="keepLogin">
    update tbl_user
    set sessionKey = #{sessionId}
      , sessionLimit = #{sessionLimit}
    where userId = #{userId}
  </update>
  
  <select id="checkUserWithSessionKey" resultType="loginTest">
    select
    	*
    from tbl_user
    where sessionKey = #{value}
  </select>
   
  <!--
    login에 대한 DB 작업을 정의한다. id와 pw가 일치하면 사용자 정보를 담고 있는 객체를 반환한다.
  -->
  <select id="login" resultType="loginTest">
    select * from tbl_user where userId = #{userId}
  </select>     
</mapper>